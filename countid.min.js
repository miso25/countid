!function(e,t,n,i){function a(t,n){this.elem=t,this.$elem=e(t),this.$elem_original=this.$elem,this.options=n,this.metadata=this.$elem.data(),this._init()}t.cancelRequestAnimFrame=function(){return t.cancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}(),t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e,n){return t.setTimeout(e,1e3/60)}}();var o="countid";a.prototype={defaults:{start:0,end:0,speed:10,tick:10,clock:!1,switchClock:!0,dateTime:0,dateTplRemaining:"Remaining time: %D days and %H:%M:%S ",dateTplElapsed:"Elapsed time: %D days and %H:%M:%S ",format:!1,complete:!1},lang:{textSelectAll:function(){return"Select all"}},_init:function(){this.config=e.extend({},this.defaults,this.options,this.metadata);var t=this;t.id=t._getRandomInt(999,99999),t.timer={},t.isPaused=!1,t.speed=t.config.speed,t.tick=t.config.tick,t.clock=t.config.clock,t.dateTpl=t.config.dateTplRemaining,0===t.config.start&&0===t.config.end&&(t.config.end=1*t.$elem.text()),t.request=0,t.paused=!1,t._setSteps(t.config.start,t.config.end),t.clock&&t._setClock(),"function"==typeof t.$elem.waypoint?t.$elem.waypoint(function(){t._loop()},{offset:"100%",triggerOnce:!0}):t._loop()},_setTime:function(){var e=this,t=Date.now(),n=new Date(e.config.dateTime).getTime(),i=1*Math.floor(t/1),a=1*(n/1),o=Math.abs(i-a),s=0;return i>a?s=1e16:o=a-i+1e3,e.step=Math.floor(o/1e3)+1,[o,s]},_setClock:function(){function e(e,t){var n=t-e.toString().length+1;return Array(+(n>0&&n)).join("0")+e}function t(t,i){var a=Math.floor(n.secLeft/p[t]),o=d[t]>0?e(a,d[t]):a;n.thisTpl=n.thisTpl.replace("%"+t,o),n.secLeft=n.secLeft-a*p[t]}var n=this;n.speed=1e3,n.tick=1;var i=n._setTime();n._setSteps(i[0],i[1]),i[0]<i[1]&&(n.dateTpl=n.config.dateTplElapsed);var a=n.dateTpl,o=-1!==a.search("%Y")?!0:!1,s=-1!==a.search("%O")?!0:!1,r=-1!==a.search("%W")?!0:!1,c=-1!==a.search("%D")?!0:!1,u=-1!==a.search("%H")?!0:!1,l=-1!==a.search("%M")?!0:!1,f=-1!==a.search("%S")?!0:!1,m=-1!==a.search("%U")?!0:!1;n.secLeft=!1;var p={Y:31536e6,O:2629739520,W:6048e5,D:864e5,H:36e5,M:6e4,S:1e3,U:1},d={Y:0,O:0,W:0,D:0,H:2,M:2,S:2,U:3};n.config.format=function(e){var i=n._setTime(),p=i[0];n.secLeft=p,n.thisTpl=a;return o?t("Y"):"",s?t("O"):"",r?t("W"):"",c?t("D"):"",u?t("H"):"",l?t("M"):"",f?t("S"):"",m?t("U"):"",n.thisTpl}},_setSteps:function(e,t){var n=this;n.start=1*e,n.end=1*t,n.current=n.start,n.clock||n.$elem.html(n.start),n.step=1*(Math.abs(n.current-n.end)/n.tick),n.dir=n.current>n.end?-1:1,n.tick=n.dir*n.tick},_rep:function(){var e=this;if(e.step>0){var t=e.current;"function"==typeof e.config.format&&(t=e.config.format(t)),e.$elem.html(t),e.step-=1,e.current+=e.tick}else{cancelRequestAnimFrame(e.request);var n=e.end;"function"==typeof e.config.format&&(n=e.config.format(n)),e.$elem.html(n),e.clock&&e.config.switchClock&&(e._setClock(),e._loop()),"function"==typeof e.config.complete&&e.config.complete(e.$elem)}},_loop:function(e,t){function n(){u.request=requestAnimFrame(n),u.frames++,s=Date.now(),c=s-r,c>a&&(r=s-c%a,u._rep())}var i,a,o,s,r,c,u=this;i=u.speed,a=1e3/i,r=Date.now(),o=r,u.frames=0,n()},_getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},_eventCallback:function(e){var t=this;"function"==typeof t.config[e]},_initEvents:function(){},setCurrent:function(e){var t=this;e=1*e,1==t.dir&&(t.start>e||t.end<e)||-1==t.dir&&(t.start<e||t.end>e)||(t.current=e,t._setSteps(t.current,t.config.end),cancelRequestAnimFrame(t.request),t._loop())},toggleDir:function(){var e=this;cancelRequestAnimFrame(e.request),e._setSteps(e.end,e.start),e._loop()},togglePause:function(){var e=this;e.isPaused?e.unpause():e.pause()},pause:function(){var e=this;cancelRequestAnimFrame(e.request),e.isPaused=!0},unpause:function(){var e=this;e.isPaused=!1,cancelRequestAnimFrame(e.request),e._loop()},refresh:function(){var e=this;cancelRequestAnimFrame(e.request),e._setSteps(e.config.start,e.config.end),e._loop()}},e.fn[o]=function(t){var n=arguments;if(t===i||"object"==typeof t)return this.each(function(){e.data(this,"plugin_"+o)||e.data(this,"plugin_"+o,new a(this,t))});if("string"==typeof t&&"_"!==t[0]&&"init"!==t){var s;return this.each(function(){var i=e.data(this,"plugin_"+o);i instanceof a&&"function"==typeof i[t]&&(s=i[t].apply(i,Array.prototype.slice.call(n,1))),"destroy"===t&&e.data(this,"plugin_"+o,null)}),s!==i?s:this}}}(jQuery,window,document);
